# E2E Tests

実際のTodoist APIを使用したEnd-to-Endテスト。CLIコマンドを通じてシステム全体の動作を検証します。

## 方針

E2Eテストは、ユーザーが実際に使用するCLIコマンドを通じてシステム全体の動作を確認します。
APIクライアントの直接テストではなく、CLIコマンドの実行結果を検証することで、より実践的なテストを実現しています。

## 実行方法

### 前提条件
- `TODOIST_API_TOKEN` 環境変数の設定が必要
- テスト用のTodoistアカウント（実際のデータが変更される可能性があります）

### ローカル実行
```bash
# E2Eテストのみ実行
make test-e2e

# または直接実行
TODOIST_API_TOKEN=your_token go test -tags=e2e ./e2e/...
```

### CI実行
GitHub ActionsのCIでは自動的に実行されます（環境変数が設定されている場合）。

## テスト内容

### 基本的なCLIコマンド
- `version`: バージョン情報の表示
- `help`: ヘルプ情報の表示
- `config`: 設定の表示と変更
- `sync`: データの同期

### 実践的なワークフロー
1. プロジェクトの作成（`project create`）
2. 複数タスクの作成（`task create --project`）
3. タスクの一覧表示（`task list --project`）
4. タスクの完了（`task close`）
5. プロジェクトの一覧表示（`project list`）

### 設定管理
- 設定ファイルの自動作成
- APIトークンの設定と保存
- 一時ディレクトリでの隔離実行

## 注意事項
- テストは実際のTodoist APIに対して実行されます
- テスト用のデータが作成されるため、テスト後にクリーンアップが必要な場合があります
- レート制限に注意してください
- テストは隔離された一時ディレクトリで実行されるため、既存の設定には影響しません